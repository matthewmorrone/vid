<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Video Router Demo</title>
  <script src="app.js"></script>
</head>
<body>
  <nav>
    <a href="/" id="nav-home">Home</a>
    <a href="/report" id="nav-report">Artifacts</a>
  </nav>
  <div id="view"></div>
  <script>
    // Expose router globally so helpers can navigate
    window.router = new Router('view');
    router
      .register('/', () => {
        renderGrid({ containerId: 'view' });
      })
      .register('/video/:name', ({ name }) => {
        renderPlayer(name, { autoplay: true });
      })
      .register('/report', () => {
        renderReport({ containerId: 'view' });
      });
    document.getElementById('nav-home').addEventListener('click', e => {
      e.preventDefault();
      router.navigate('/');
    });
    document.getElementById('nav-report').addEventListener('click', e => {
      e.preventDefault();
      router.navigate('/report');
    });

    // Example static navigation; real app would query the API
    const videos = ['alpha', 'beta', 'gamma'];
    const list = document.createElement('ul');
    videos.forEach(name => {
      const li = document.createElement('li');
      const a = document.createElement('a');
      const href = `/video/${encodeURIComponent(name)}`;
      a.href = href;
      a.textContent = `Video ${name}`;
      a.addEventListener('click', ev => {
        ev.preventDefault();
        router.navigate(href);
      });
      li.appendChild(a);
      list.appendChild(li);
    });
    document.body.insertBefore(list, document.getElementById('view'));
  </script>
</body>
</html>
